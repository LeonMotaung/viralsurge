<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="google-adsense-account" content="ca-pub-4456472860533377">
  <title><%= title || 'SA - ViralSurge' %></title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4456472860533377"
     crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Custom styles for a professional look */
    body {
      font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, sans-serif;
      background-color: #f8fafc;
    }
    
    .article-card {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .article-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }
    
    .article-title a {
      color: #1e293b;
      font-weight: 600;
      font-size: 1.25rem;
      line-height: 1.4;
      transition: color 0.2s ease;
    }
    
    .article-title a:hover {
      color: #3b82f6;
    }
    
    .article-excerpt {
      color: #64748b;
      line-height: 1.6;
    }
    
    .article-image {
      position: relative;
      overflow: hidden;
    }
    
    .article-image img {
      transition: transform 0.3s ease;
    }
    
    .article-card:hover .article-image img {
      transform: scale(1.03);
    }
    
    .sidebar-card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }
    
    .sidebar-header {
      color: #1e293b;
      font-weight: 600;
      font-size: 1.125rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid #e2e8f0;
      margin-bottom: 1rem;
    }
    
    .trending-list {
      list-style: none;
    }
    
    .trending-list li {
      padding: 0.5rem 0;
      border-bottom: 1px solid #f1f5f9;
    }
    
    .trending-list li:last-child {
      border-bottom: none;
    }
    
    .trending-list a {
      color: #334155;
      font-weight: 500;
      transition: color 0.2s ease;
      display: block;
    }
    
    .trending-list a:hover {
      color: #3b82f6;
    }
    
    .article-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
    }
    
    @media (max-width: 768px) {
      .article-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">
  <%- include('partials/header') %>

  <main class="max-w-7xl mx-auto px-4 py-8">
    <section class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900"><%= title || 'SA' %></h1>
      <% if (subtitle) { %>
        <p class="text-gray-600 mt-2"><%= subtitle %></p>
      <% } %>
    </section>

    <section class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div class="md:col-span-2">
        <% if (hero) { %>
          <% 
            const heroImg = hero.featuredImageId 
              ? '/upload/' + hero.featuredImageId 
              : hero.featuredImageUrl || heroImageUrl || '';
          %>
          <div class="article-card mb-8">
            <div class="article-image h-72 overflow-hidden">
              <img src="<%= heroImg %>" alt="<%= hero.title %>" class="w-full h-full object-cover" />
            </div>
            <div class="p-6">
              <h2 class="article-title mb-3">
                <a href="<%= hero.slug ? '/a/' + hero.slug : '/a/' + hero._id %>">
                  <%= hero.title %>
                </a>
              </h2>
              <p class="article-excerpt"><%= hero.excerpt %></p>
              <div class="mt-4 flex items-center text-sm text-gray-500">
                <span><i class="far fa-clock mr-1"></i> <%= hero.readTime || '5' %> min read</span>
                <span class="mx-2">â€¢</span>
                <span><i class="far fa-eye mr-1"></i> <%= hero.views || '1.2k' %> views</span>
              </div>
            </div>
          </div>
        <% } %>

        <% if (articles && articles.length) { %>
          <div class="article-grid">
            <% articles.forEach(function(a){ %>
              <% 
                const img = a.featuredImageId 
                  ? '/upload/' + a.featuredImageId 
                  : a.featuredImageUrl || 'https://via.placeholder.com/800x480?text=No+Image';
              %>
              <article class="article-card">
                <div class="article-image h-48">
                  <img src="<%= img %>" alt="<%= a.title %>" class="w-full h-full object-cover"/>
                </div>
                <div class="p-4">
                  <h3 class="article-title mb-2">
                    <a href="<%= a.slug ? '/a/' + a.slug : '/a/' + a._id %>">
                      <%= a.title %>
                    </a>
                  </h3>
                  <p class="article-excerpt text-sm"><%= a.excerpt %></p>
                  <div class="mt-3 flex items-center text-xs text-gray-500">
                    <span><i class="far fa-clock mr-1"></i> <%= a.readTime || '3' %> min read</span>
                  </div>
                </div>
              </article>
            <% }) %>
          </div>
        <% } else { %>
          <div class="text-center py-12">
            <i class="far fa-newspaper text-4xl text-gray-300 mb-4"></i>
            <p class="text-gray-600">No articles found in this section.</p>
          </div>
        <% } %>
      </div>

      <aside class="sidebar-card p-6">
        <h4 class="sidebar-header">Most Read</h4>
        <div class="sidebar-body">
          <% if (mostReadList && mostReadList.length) { %>
            <ul class="trending-list">
              <% mostReadList.forEach(function(it, index){ %>
                <li class="flex items-start">
                  <span class="text-sm font-bold text-gray-400 mr-3 mt-1"><%= index + 1 %>.</span>
                  <a href="<%= it.slug ? '/a/' + it.slug : '/a/' + it._id %>" class="text-sm">
                    <%= it.title %>
                  </a>
                </li>
              <% }) %>
            </ul>
          <% } else { %>
            <p class="text-gray-600 text-sm">No trending articles yet.</p>
          <% } %>
        </div>
        
        <div class="mt-8">
          <h4 class="sidebar-header">Newsletter</h4>
          <p class="text-sm text-gray-600 mb-4">Stay updated with our latest news</p>
          <form class="space-y-3">
            <input type="email" placeholder="Your email address" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors">Subscribe</button>
          </form>
        </div>
      </aside>
    </section>
  </main>

  <%- include('partials/footer') %>
</body>
</html>